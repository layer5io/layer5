{"componentChunkName":"component---src-templates-resource-single-js","path":"/resources/service-mesh/service-mesh-architecture-and-components","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Service Mesh Architecture and Components\",\n  \"thumbnail\": \"./figure2.png\",\n  \"date\": \"2021-10-02 10:30:05 -0530\",\n  \"category\": \"Service Mesh\",\n  \"type\": \"Article\",\n  \"tags\": [\"Service mesh\", \"Network Planes\"],\n  \"featured\": false,\n  \"published\": true,\n  \"resource\": true\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(ResourcesWrapper, {\n    mdxType: \"ResourcesWrapper\"\n  }, mdx(\"div\", {\n    className: \"intro\"\n  }, mdx(\"p\", null, \"Learn more about service mesh fundamentals in \", mdx(Link, {\n    className: \"blog\",\n    to: \"/learn/service-mesh-books/the-enterprise-path-to-service-mesh-architectures-2nd-edition\",\n    mdxType: \"Link\"\n  }, \"The Enterprise Path to Service Mesh Archictures (2nd Edition)\"), \" -  free book and excellent resource which addresses how to evaluate your organization\\u2019s readiness, provides factors to consider when building new applications and converting existing applications to best take advantage of a service mesh, and offers insight on deployment architectures used to get you there.\")), mdx(\"p\", null, \"Service mesh architectures typically consist of three planes: a management plane, a control plane, and a data plane. The analogy between how physical networks (and their equipment) are designed and managed along with\\xA0the concept of these three planes immediately resonates with network engineers.\\xA0 The OSI model is another type of training that network engineers receive. For those who haven't seen the OSI model in a while, Figure 1 serves as a refresher.\"), mdx(\"div\", {\n    className: \"right\"\n  }, mdx(\"img\", {\n    src: Planes,\n    align: \"right\",\n    alt: \"Network Planes\"\n  }), mdx(\"p\", null, \"Figure 1: Physical networking versus software-defined networking planes\")), mdx(\"p\", null, \"Let\\u2019s contrast physical networking planes and network topologies with those of service meshes:\"), mdx(\"h3\", null, \"Physical network planes\"), mdx(\"p\", null, \"The application traffic created by hosts, clients, servers, and applications that use the network as a transport is contained in the physical network data plane (also known as the forwarding plane). As a result, data plane traffic should never have source or destination IP addresses that are assigned to network elements like routers and switches; instead, it should be originated from and delivered to end devices like PCs and servers. To forward data plane traffic as swiftly as possible, routers and switches use hardware chips called application-specific integrated circuits (ASICs). A forwarding information base is referenced by the physical networking data plane (FIB). A forwarding information base (FIB) is a basic, dynamic table that maps a media access control address (MAC address) to a physical network port, allowing traffic to be transmitted at wire speed (using ASICs) to the next device.\"), mdx(\"p\", null, \"The physical networking control plane is the\\xA0logical entity that is linked to router processes and functions and is responsible for generating and maintaining necessary intelligence about the state of the network (topology) and the router's interfaces. The control plane includes network protocols, such as routing, signaling, and link-state protocols that are used to build and maintain the operational state of the network and provide IP connectivity between IP hosts.\\xA0\\xA0 As physical network control planes run in-band with network traffic, they are vulnerable to Denial of service (DoS) attacks, which can result in:\"), mdx(\"ul\", null, mdx(\"li\", null, \"Exhaustion of memory and/or buffer resources.\"), mdx(\"li\", null, \"Loss of routing protocol updates and keepalives.\"), mdx(\"li\", null, \"Slow or blocked access to interactive management sessions.\"), mdx(\"li\", null, \"High CPU utilization.\"), mdx(\"li\", null, \"Routing instability, interrupted network reachability, or inconsistent packet delivery.\")), mdx(\"p\", null, \"The physical networking management plane is a logical entity that specifies the traffic used to access, manage, and monitor all network elements via protocols such as SNMP, SSH, HTTPS, and\\xA0Telnet. All network provisioning, maintenance, and monitoring operations are supported by the management plane. Although control plane network traffic is handled in-band with all other data plane traffic, management plane traffic\\xA0can be carried over an out-of-band (OOB) management network to enable separate reachability if the primary in-band IP path is unavailable (and create a security boundary). Restricting management plane access to devices on trusted networks is critical.\"), mdx(\"p\", null, \"Physical networking control and data planes are tightly coupled and generally vendor-provided as a proprietary integration of hardware and firmware. Software-defined networking (SDN) has done much to standardize and decouple. OpenvSwitch and OpenDaylight are two examples of SDN projects. We\\u2019ll see that control and data planes of service meshes are not necessarily tightly coupled.\"), mdx(\"div\", {\n    className: \"left\"\n  }, mdx(\"img\", {\n    src: Topology,\n    align: \"right\",\n    alt: \"Mesh Topology\"\n  }), mdx(\"p\", null, \"Figure 2: Mesh topology\\u2014fully connected network nodes\")), mdx(\"h3\", null, \"Physical network topologies\"), mdx(\"p\", null, \"Star, spoke-and-hub, tree (also called\\xA0hierarchical), and mesh are some of the most used physical networking topologies. Nodes in mesh networks connect directly and non-hierarchically, such that each node is connected to an indefinite number (typically as many as possible or as needed dynamically) of neighbour nodes, allowing at least one path from a given node to any other node to route data efficiently .\"), mdx(\"p\", null, \"Wireless is the canonical use case for physical mesh networks in which the networking medium is sensitive to line-of-sight, weather-induced, or other disruptions, and so reliability is a top priority. Mesh networks typically self-configure, allowing\\xA0dynamic task distribution. This ability is especially important to mitigate\\xA0the risk of failure (improving resiliency) and reacting to continuously changing topologies. It's easy to see why this network topology\\xA0is the preferred design for service mesh architectures.\"), mdx(\"h3\", null, \"Service mesh network planes\"), mdx(\"p\", null, \"Service mesh architectures typically employ the same three networking planes: data, control, and management. \"), mdx(\"div\", {\n    className: \"right\"\n  }, mdx(\"img\", {\n    src: Architecture,\n    align: \"right\",\n    alt: \"Service mesh architecture\"\n  }), mdx(\"p\", null, \"Figure 3: An example of service mesh architecture. In Conduit\\u2019s architecture, control and data planes divide in-band and out-of-band responsibility for service traffic\")), mdx(\"p\", null, \"A service mesh data plane (also known as the proxying layer) intercepts all packets in a request and performs health checks, routing, load balancing, authentication, authorization, and generation of observable signals. Service proxies are transparently inserted, and applications are oblivious of the data plane's existence when they conduct service-to-service calls. Intra-service communication, as well as inbound (ingress) and outbound (egress) service mesh traffic, are handled by data planes. Whether traffic is entering the mesh (ingressing) or leaving the mesh (egressing), application service traffic is directed first to the service proxy for handling prior to sending (or not sending) along to the application.\\xA0 Traffic is transparently intercepted and redirected to the service proxy in order to reroute traffic from the service proxy to the service application. The service proxy intercepts and redirects traffic between\\xA0the service proxy and service application places the service application\\u2019s container onto a network it would otherwise not be on.\\xA0All traffic to and from the service application is seen by the service proxy.\\xA0 Service proxies are the building blocks of service mesh data planes.\"), mdx(\"div\", {\n    className: \"fact\"\n  }, \"Traffic Interception and Redirection:\", mdx(\"p\", null, \"The technology utilised to intercept and redirect traffic varies between service meshes. Some meshes allow you the option of using iptables, IPVS, or eBPF to transparently proxy requests between clients and service applications. Other service mesh proxies operate in a less transparent manner, requiring application traffic to be configured to direct their traffic to the proxy. The operating system type and kernel version used for the service mesh deployment are constrained by the choice of each of these technologies, which influences the speed with which packets are processed.\")), mdx(\"p\", null, \"Envoy is one of the most widely used proxy in service mesh data planes. It's also common to see it deployed\\xA0as a load balancer or ingress gateway. The proxies used in service mesh data planes are highly intelligent.\\xA0 In order to manipulate network packets\\xA0(including application level data), they\\xA0may include any number of protocol-specific filters . Extending data plane capabilities with technology advancements like WebAssembly allows service meshes to inject additional logic into requests while simultaneously handling large traffic loads.\"), mdx(\"p\", null, \"When the number of proxies becomes unmanageable or when a single point of visibility and control is required, a service mesh control plane is essential. Control planes offer policy and configuration for the services in the mesh, transforming a set of isolated, stateless proxies into a service mesh. Control planes run out-of-band and do not directly touch any network packets in the mesh. Control planes usually include a command-line interface (CLI) and a user interface to interact with, both of which provide access to a centralised API for regulating proxy behaviour holistically.\\xA0You can use the control plane's APIs to automate changes to its configuration (for example, using a continuous integration/continuous deployment pipeline), where configuration is generally version controlled and updated.\"), mdx(\"div\", {\n    className: \"fact\"\n  }, \"Proxies are generally considered stateless, but this is a thought-provoking concept. In the way in which proxies are generally informed by the control plane of the presence of services, mesh topology updates, traffic and authorization policy, and so on, proxies cache the state of the mesh but aren\\u2019t regarded as the source of truth for the state of the mesh.\"), mdx(\"p\", null, \"We can see how the data and control planes are packaged and deployed in Linkerd (pronounced \\\"linker-dee\\\") and Istio (pronounced \\\"Ist-tee-oh\\\"), two prominent open source service meshes. In terms of packaging, Linkerdv1 contains both its proxying components (linkerd) and its control plane (namerd) packaged together simply as \\u201CLinkerd,\\u201D and Istio brings a collection of control plane components (Galley, Pilot, and Citadel) to pair by default with Envoy (a data plane) packaged together as \\u201CIstio.\\u201D Envoy is often labeled a service mesh, inappropriately so, because it takes packaging with a control plane to form a service mesh.\"), mdx(\"p\", null, \"A service mesh management plane is a higher order level of control as shown in Figure 4. A management plane may provide a variety of functions. As such, implementations vary in their functionality: some focusing on orchestrating service meshes (e.g., service mesh lifecycle management) and mesh federation, providing insight across a collection of diverse meshes. Some management planes focus on integrating service meshes with business process and policy, including governance, compliance, validation of configuration, and extensible access control.\"), mdx(\"div\", {\n    className: \"left\"\n  }, mdx(\"img\", {\n    src: Meshery,\n    align: \"right\",\n    alt: \"Meshery\"\n  }), mdx(\"p\", null, \"Figure 4: Meshery, the cloud native management plane\\u2019s architecture.\")), mdx(\"p\", null, \"A service mesh management plane is a higher order level of control. A management plane can provide\\xA0various functions. As a result, implementations differ in functionality, with some focused on orchestrating service meshes (e.g., service mesh lifecycle management) and mesh federation, which provides insight across a set of meshes.\\xA0Some management planes focus on integrating service meshes with business process and policy, including governance, compliance, validation of configuration, and extensible access control.\"), mdx(\"p\", null, \"In terms of deployments, data planes, such as Linkerdv2, contain proxies that are created as part of the project and are not designed to be configured by hand, but rather to have their behaviour completely controlled by the control plane. Other service meshes, such as Istio, prefer not to develop their own proxy and instead ingest and utilise independent proxies (separate projects), simplifying proxy selection and deployment outside of the mesh(standalone). Control planes are often deployed in a separate \\\"system\\\" namespace,\\xA0using\\xA0Kubernetes as the example infrastructure. Depending on how closely they integrate with non-containerized workloads and a business's backend systems, management planes are deployed both on and off cluster.\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Service Mesh Architecture and Components","subtitle":null,"date":"October 2nd, 2021","author":null,"category":"Service Mesh","tags":["Service mesh","Network Planes"],"thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAC4jAAAuIwF4pT92AAACI0lEQVQoz31SaVPaUBTN///UTu1gmXZsHbVatYoKuCAi0LDKElnMsGR7IQnJ4yUvCQkhJB1kxinM2PvpzrnL3HvOIcL18Dwv16CTxWfdMFYIK8oX+SZFD8Mw2Ggm3rIgWNa67GjrqrwVr5ymSNvEY0U+SNc/J54iVySQ5Le2zeHFK9ruMTv31I/sy6/4PTPo091u7A/1syJsnz8yDPPucBiGuq4jBGut7v5JrFGvybKsyHKhUDy+vO680OpYcRzn30uJMAiwZftzHyEkjkYYYyDwE02DEM7nc9M0J5OJwHHGci8CADjT6Ww2s+xpGAZEsdWLXlf2kzmq2VQUBWMMIZwg5DgOwzCCIHieJ4qi4ziaBkeiWKrWdm9L35JFesARp2T3yx0VSVRzZNG2LF03WJbt9/uWZZEkSdM0QqjdbkMIka4jqKZLzegdtX3TOHsoEdXOYCdV/x5LUc0GQrrruhhjy7I8z1MURVXVIAhUVfV9H2OsadpTrXGYrn2Nk/VWhwgWvgY1Z2rrug4AMAyDYxlJFCRJ8n3fNE1Zkph+bwKXLPA877qubdtQ04LFYo3t5cOa2hnwyWyp024DAEaiWK5Ub8m6II3VseK67jrb6zp3h/zH39lPF4XLhwLPsf1e7+Sx9uGcjJxlJFl5V+cV2hkKu/neXpE7TGRWDjvOtQ4qIJosMxz3P5O8enuWqTwfJTOSLK8QDkhHN/lcqRosFhve/gu9hL7EgGVZ0wAAAABJRU5ErkJggg=="},"images":{"fallback":{"src":"/static/bed9d3fcfe69a84ae0787ff2ca8845aa/c1ead/figure2.png","srcSet":"/static/bed9d3fcfe69a84ae0787ff2ca8845aa/9888b/figure2.png 125w,\n/static/bed9d3fcfe69a84ae0787ff2ca8845aa/84c74/figure2.png 250w,\n/static/bed9d3fcfe69a84ae0787ff2ca8845aa/c1ead/figure2.png 500w","sizes":"(min-width: 500px) 500px, 100vw"},"sources":[{"srcSet":"/static/bed9d3fcfe69a84ae0787ff2ca8845aa/88c45/figure2.webp 125w,\n/static/bed9d3fcfe69a84ae0787ff2ca8845aa/3f64a/figure2.webp 250w,\n/static/bed9d3fcfe69a84ae0787ff2ca8845aa/f3cc1/figure2.webp 500w","type":"image/webp","sizes":"(min-width: 500px) 500px, 100vw"}]},"width":500,"height":322}},"extension":"png","publicURL":"/static/bed9d3fcfe69a84ae0787ff2ca8845aa/figure2.png"}},"fields":{"slug":"/resources/service-mesh/service-mesh-architecture-and-components"}}},"pageContext":{"slug":"/resources/service-mesh/service-mesh-architecture-and-components"}},"staticQueryHashes":["1247637131","1485533831","2449327605","4047814605"]}