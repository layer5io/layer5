{"componentChunkName":"component---src-templates-blog-category-list-js","path":"/blog/category/service-mesh.html","result":{"data":{"allMdx":{"nodes":[{"id":"b171f9fc-a31b-5e80-ba6b-cd0f83878e10","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Debug Envoy Proxy\",\n  \"subtitle\": \"\",\n  \"description\": \"An open index for measuring performance of cloud native infrastructure in context of the value provided to your business.\",\n  \"date\": \"2022-05-27 09:10:00 +0000\",\n  \"author\": \"Layer5 Team\",\n  \"thumbnail\": \"./debug-envoy-proxy.svg\",\n  \"darkthumbnail\": \"./debug-envoy-proxy.svg\",\n  \"category\": \"Service Mesh\",\n  \"tags\": [\"Envoy\", \"Troubleshooting\"],\n  \"published\": true,\n  \"resource\": true,\n  \"type\": \"Blog\",\n  \"redirect_from\": [\"/blog/envoy/debug-envoy-proxy/\", \"/blog/envoy/debug-envoy-proxy\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(BlogWrapper, {\n    mdxType: \"BlogWrapper\"\n  }, mdx(\"p\", null, \"Trying to figure out what's happening with your request traffic? Not sure why your Envoy configuration isn't working? If you're using Istio as your gateway and need to troubleshoot your ingress traffic requests, here are a few tips for debugging Envoy proxy.\"), mdx(\"h2\", null, \"Enable Envoy Debug Logging\"), mdx(\"p\", null, \"By default Envoy system logs are sent to \", mdx(\"code\", null, \"/dev/stderr\"), \". This location be overridden using \", mdx(\"code\", null, \"--log-path\"), \". Logging to \", mdx(\"code\", null, \"/dev/stderr\"), \"  for system logs and to \", mdx(\"code\", null, \"/dev/stdout\"), \" for access logs can be useful when running Envoy inside a container. In this way, these two individual logstreams can be separated, and using this approach, logging requires no additional files or directories to be mounted.\"), mdx(\"div\", {\n    className: \"intro\"\n  }, mdx(\"p\", null, \"We recommend setting the Envoy proxy\\u2019s log level to debug in a pre-production environment. Debug logs can help you identify issues before you graduate the associated configuration to your production environment.\")), mdx(\"h3\", null, \"Using envoy CLI\"), mdx(\"p\", null, \"The envoy command has a \", mdx(\"code\", null, \"--log-level\"), \" flag that can be useful for debugging. By default, it\\u2019s set to info. To change it to debug, edit the envoy DaemonSet in the istio-system namespace and replace the \", mdx(\"code\", null, \"--log-level info\"), \" flag with \", mdx(\"code\", null, \"--log-level debug\"), \". Setting the Envoy log level to debug can be particilarly useful for debugging TLS connection failures.\"), mdx(\"h3\", null, \"Using container image\"), mdx(\"p\", null, \"If you\\u2019re using the Envoy image, you can set the log level to debug through the \", mdx(\"code\", null, \"ENVOY_LOG_LEVEL\"), \" environment variable. The log level for Envoy system logs can be set using the \", mdx(\"code\", null, \"-l\"), \" or \", mdx(\"code\", null, \"--log-level\"), \" option.\"), mdx(\"p\", null, \"The available log levels are:\"), mdx(\"ul\", null, mdx(\"li\", {\n    className: \"highlight\",\n    style: {\n      \"width\": \"fit-content\"\n    }\n  }, \"trace\"), mdx(\"li\", {\n    className: \"highlight\",\n    style: {\n      \"width\": \"fit-content\"\n    }\n  }, \"debug\"), mdx(\"li\", {\n    className: \"highlight\",\n    style: {\n      \"width\": \"fit-content\"\n    }\n  }, \"info\"), mdx(\"li\", {\n    className: \"highlight\",\n    style: {\n      \"width\": \"fit-content\"\n    }\n  }, \"warning/warn\"), mdx(\"li\", {\n    className: \"highlight\",\n    style: {\n      \"width\": \"fit-content\"\n    }\n  }, \"error\"), mdx(\"li\", {\n    className: \"highlight\",\n    style: {\n      \"width\": \"fit-content\"\n    }\n  }, \"critical\"), mdx(\"li\", {\n    className: \"highlight\",\n    style: {\n      \"width\": \"fit-content\"\n    }\n  }, \"off\")), mdx(\"p\", null, \"The default is \", mdx(\"span\", {\n    className: \"highlight\"\n  }, \"info\"), \".\"), mdx(\"h3\", null, \"Setting Envoy logs in the Helm configuration\"), mdx(\"p\", null, \"The Consul helm chart uses \", mdx(\"code\", null, \"envoyExtraArgs:\"), \" to leverage Envoy command line options. One of the helpful options is \", mdx(\"code\", null, \"--component-log-level\"), \". This provides granular control over setting log levels for Envoy components. In the example below, the components upstream, http, router and config are set to the debug log level. These four components are vital when debugging issues with requests between your services(sidecar proxies).\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"connectInject: enabled: true envoyExtraArgs: \\\"--component-log-level upstream:debug,http:debug,router:debug,config:debug\\\"\"))), mdx(\"p\", null, \"If you haven't set envoyExtraArgs: in consul-values.yaml just yet, you can set the log levels on the fly by using the following kubectl command:\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"$ kubectl exec pod/pod-name -c container-name -- curl -X POST http://localhost:19000/logging?config=debug\"))), mdx(\"p\", null, \"Example:\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"$ kubectl exec pod/static-client-5bf4575d9c-zr2b -c static-client -- curl -X POST  http://localhost:19000/logging?config=debug\"))), mdx(\"p\", null, \"You will execute the kubectl command for each component. Make sure to append the correct component at the end of the curl command, i.e. \", mdx(\"code\", null, \"logging? component = debug\"), \".\"), mdx(\"p\", null, \"If curl is not able to be used in your pod, you can alternatively use \", mdx(\"code\", null, \"kubectl port-forward pod-name 19000\"), \" to make the Envoy admin accessible. From another terminal window, you can then curl to change the log levels. The output you receive in the terminal will show the modified component log levels.\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"$ curl -X POST http://localhost:19000/logging? component = debug\"))), mdx(\"h3\", null, \"Access Envoy logs in Kubernetes\"), mdx(\"p\", null, \"Accessing Envoy logs via pods can be done with the following command:\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"$ kubectl logs --follow pod/ pod-name -c envoy-sidecar\"))), mdx(\"p\", null, \"The --follow flag provides a real time observation into Envoy logs. \"), mdx(\"h3\", null, \"Setting and Accessing Envoy logs when not using Helm.\"), mdx(\"p\", null, \"The following command will start an envoy side car proxy, set the log level to debug with -l debug and capture Envoy logs in envoy_logs.txt. The .txt file will need to be created before executing this command.\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"$ consul connect envoy -sidecar-for counting-1 -- -l debug --log-path envoy_logs.txt\"))), mdx(\"p\", null, \"To have granular control over the Envoy components that is needed to be debugged, use the following command:\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"$ consul connect envoy -sidecar-for counting-1 -- --log-path envoy_logs.txt --component-log-level upstream:debug,http:debug,router:debug,config:debug\"))), mdx(\"h2\", null, \"Find your Istio Ingress Gateway\"), mdx(\"p\", null, \"With Istio as your gateway, you should first look at \", mdx(\"code\", null, \"VirtualService\"), \" objects. These can show if the hosts are registered to the gateway correctly.\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"$ kubectl get virtualservice -o=yaml\"))), mdx(\"p\", null, \"However, sometimes, the \", mdx(\"a\", {\n    className: \"highlight\",\n    href: \"https://envoyproxy.io\"\n  }, \"Envoy\"), \" inside the gateway container is not properly configured (likely due to a bug). You can dump Envoy configuration to debug this further.\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"# find istio ingress gateway pod \\\\ $ kubectl get pods -n istio-system -l app=istio-ingressgateway\"))), mdx(\"p\", null, \"Let's use \", mdx(\"code\", null, \"istio-ingressgateway-a93019f9dfw-l39xd\"), \" as an example pod name.\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"# enable debugging on envoy \\\\ $ kubectl exec --namespace=istio-system \\\\ istio-ingressgateway-a93019f9dfw-l39xd \\\\ -c istio-proxy -- curl -X POST \\\\ http://localhost:15000/logging?level=debug\"))), mdx(\"p\", null, \"Then, use \", mdx(\"code\", null, \"istioctl\"), \" tool to dump route configuration (this will show the output from the \", mdx(\"a\", {\n    href: \"https://www.envoyproxy.io/docs/envoy/latest/operations/admin#operations-admin-interface-config-dump\"\n  }, mdx(\"code\", null, \"/config_dump\"), \" admin endpoint\"), \" on Envoy):\"), mdx(\"div\", null, mdx(\"pre\", null, mdx(\"code\", null, \"$ istioctl proxy-config routes -n istio-system -o=json \\\\ istio-ingressgateway-a93019f9dfw-l39xd\"))), mdx(\"p\", null, \"We hope these steps are useful to you. If you're still having trouble configuring Envoy proxy, open up a new thread on the \", mdx(\"a\", {\n    href: \"https://discuss.layer5.io\",\n    className: \"highlight\"\n  }, \"community discussion forum\"), \" or subscribe to the \", mdx(Link, {\n    to: \"/subscribe\",\n    className: \"highlight\",\n    mdxType: \"Link\"\n  }, \"Layer5 newletter\"), \" for tips and tricks.\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Debug Envoy Proxy","subtitle":"","date":"May 27th, 2022","author":"Layer5 Team","thumbnail":{"childImageSharp":null,"extension":"svg","publicURL":"/static/da5d909604f7704bb30151391b60cdbb/debug-envoy-proxy.svg"},"darkthumbnail":{"childImageSharp":null,"extension":"svg","publicURL":"/static/da5d909604f7704bb30151391b60cdbb/debug-envoy-proxy.svg"}},"fields":{"slug":"/blog/service-mesh/debug-envoy-proxy"}},{"id":"44b1509f-0ba1-5ea3-9341-82abe59558cd","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"MeshMark: Cloud Native Value Measurement\",\n  \"date\": \"2022-05-17 10:30:05 -0530\",\n  \"author\": \"Gaurav Chadha\",\n  \"thumbnail\": \"./banner.webp\",\n  \"darkthumbnail\": \"./banner.webp\",\n  \"description\": \"An open index for measuring performance of cloud native infrastructure in context of the value provided to your business.\",\n  \"category\": \"Service Mesh\",\n  \"tags\": [\"MeshMark\", \"ServiceMeshCon\", \"KubeCon\", \"Partners\"],\n  \"published\": true,\n  \"featured\": true,\n  \"resource\": true,\n  \"type\": \"Blog\",\n  \"product\": \"MeshMap\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(BlogWrapper, {\n    mdxType: \"BlogWrapper\"\n  }, mdx(\"div\", {\n    className: \"intro \"\n  }, mdx(\"p\", null, mdx(Link, {\n    to: \"/community/members/lee-calcote\",\n    mdxType: \"Link\"\n  }, \"Lee Calcote\"), \" and \", mdx(Link, {\n    to: \"\",\n    mdxType: \"Link\"\n  }, \"Mrittika Ganguli\"), \" presented \", mdx(\"i\", null, \"MeshMark: Service Mesh value measurement\"), \" at ServiceMeshCon Europe 2022.\")), mdx(\"p\", null, mdx(Link, {\n    to: \"/community/members/lee-calcote\",\n    mdxType: \"Link\"\n  }, \"Lee Calcote\"), \" is an innovative product and technology leader, passionate about empowering engineers and enabling organizations. As the founder and CEO of Layer5, he is at the forefront of the cloud native movement.\", mdx(Link, {\n    to: \"\",\n    mdxType: \"Link\"\n  }, \" Mrittika Ganguli\"), \" is the Director Cloud Native Data Plane, Principle Engineer and Network Architect at Intel.\"), mdx(\"img\", {\n    src: meshmark,\n    alt: \"Developers need to access service mesh\",\n    style: {\n      \"display\": \"block\",\n      \"margin\": \"0 auto 0.5rem\",\n      \"width\": \"40%\"\n    }\n  }), mdx(\"p\", null, mdx(\"h2\", null, \"What is Meshmark?\")), mdx(\"p\", null, \"MeshMark is a performance index that measures the value and overhead of your cloud native environment. By converting performance measurements into insights about the value of individual, cloud native application networking functions, MeshMark distills a variety of overhead signals and key performance indicators into a simple index.\"), mdx(\"img\", {\n    src: performanceQuestion,\n    alt: \"Developers need to access service mesh\",\n    style: {\n      \"width\": \"50%\",\n      \"cssFloat\": \"right\"\n    }\n  }), mdx(\"p\", null, mdx(\"h3\", null, \"Talk started with a question to audience: Missing performance characteristics?\")), mdx(\"p\", null, mdx(Blockquote, {\n    className: \"pull-left\",\n    quote: \"We are missing some performance characteristics, as people has many metrics used to track environments it might take a while to articulate the characteristics performance of your environment.\",\n    person: \"Lee Calcote\",\n    mdxType: \"Blockquote\"\n  })), mdx(\"h3\", null, \"Lee Calcote explains about \\\"Business Performance\\\"\"), mdx(\"p\", null, \"We're quite frequently overlooking business performance, which is in large respect to why we're running the infrastructure in the first place. We usually talk about performance and cold, hard, quantitative speeds and feeds, but instead, I would submit to you that performance should absolutely be measured in terms of speeds and feeds, but it's a lot more meaningful to layer in the value and to quantify the value that your infrastructure is providing. So we're really kind of missing the business performance aspects of what we're tracking, how we're characterizing.\"), mdx(\"img\", {\n    src: smp,\n    alt: \"Developers need to access service mesh\",\n    style: {\n      \"width\": \"50%\",\n      \"cssFloat\": \"right\"\n    }\n  }), mdx(\"h3\", null, \"Introduction to Service Mesh Performance\"), mdx(\"p\", null, \"The Service Mesh Performance project falls under the umbrella of CNCF project. This project is, at its core, probably a specification for capturing the details of your environment in a uniform way, in a consistent way, capturing your infrastructure configuration, your service mesh configuration, and characterizing the details of your workloads and doing so consistently such that you can baseline your environments. You can benchmark them in a consistent way, share with others, maybe compare with the performance that others are having. To the extent that it's codified, you can have system to system exchange of this information.\"), mdx(\"h2\", null, \"Mrittika Ganguli introduces MeshMark with an example\"), mdx(\"p\", null, \"MeshMark is a Cloud Native value measurement, from value you are essentially trying to measure if the performance of your infrastructure matches what you want to get from your deployment, what kind of value you want to get, business value you want to get from your deployment. So, for example, if you have some key performance indicators, do you want to measure whether the MeshMark value is directly responsible for how your video gets loaded or your image gets loaded on a particular webpage.\", mdx(\"p\", null, mdx(Blockquote, {\n    className: \"pull-right\",\n    quote: \"Are my resources utilized as best as possible? Why am I not getting the SLO met with 4 resources when I only needed 1 resource without the service mesh? How can I improve my 99.9% latencies or can I map my service policy to utilization? Is the network a performance hog, or storage, or cache? Meshmark intends to help model and provide an index for many of these areas\",\n    person: \"Mrittika Ganguli\",\n    mdxType: \"Blockquote\"\n  }), \"So often you see when you have a YouTube video uploaded, it will have only the text and not the video.\"), \"And so what happens is you do not want that kind of an experience. You want the video to be and the images to be loaded first. As you can see in video if you click on something, you may often see the text get rendered first and then the video. The load latency of the video traffic is what impacts you see visually. And so the deployment of your cloud native environment. If it can be indexed through a MeshMark ratio, your load latency will be directly proportional to that and then the number of resources you're using to deploy this environment to get a particular lower latency or a higher latency is a usage metric and that's directly proportional to your MeshMark. The TCO of your application hence becomes directly related to MeshMark.\"), mdx(\"p\", null, mdx(\"img\", {\n    src: meshmarkSlide,\n    className: \"slides\",\n    align: \"center\",\n    style: {\n      \"marginLeft\": \"30px\"\n    },\n    alt: \"meshmark\"\n  }), mdx(\"img\", {\n    src: example,\n    className: \"slides\",\n    align: \"center\",\n    style: {\n      \"marginLeft\": \"30px\"\n    },\n    alt: \"meshmark example\"\n  })), mdx(\"img\", {\n    src: formula,\n    alt: \"MeshMark formula\",\n    style: {\n      \"width\": \"50%\",\n      \"cssFloat\": \"right\"\n    }\n  }), mdx(\"h2\", null, \"MeshMark The Formula\"), mdx(\"p\", null, \"MeshMark functions as a value performance index (a scale) to provide organizations  the ability to weigh the value of their service mesh versus the overhead of their service mesh and assess whether they are getting out of the mesh what they are \\u201Cpaying\\u201D for in it. MeshMark\\u2019s scoring system ranges from 0 to 100 and incorporates collections of resource utilization efficiency calculations, categorized into similar consumption classes.\"), mdx(\"h3\", null, \"Mrittika explains MUE\"), mdx(\"p\", null, \"It's a calculation, combined ratio of measured platform resources to assign resources. If you're able to measure what your assigned resources are in whatever form and able to also monitor what's the used resources, you can have this ratio. So, for example, a very simple one is CPU performance.\", mdx(\"img\", {\n    src: MUE,\n    alt: \"MeshMark MUE\",\n    style: {\n      \"width\": \"50%\",\n      \"cssFloat\": \"left\",\n      \"paddingRight\": \"1rem\"\n    }\n  }), \" And you would want to see if the CPU performance as a ratio to the available resources is a loss or a gain. So CPU performance, raw loss over total CPU is our MUE one. And that's just one minus CPU utilization over 100. That's a very simple ratio and if you see on the slide, the graph shows you that as the latency increases, your Mue lowers. And so that's a very good indicator that your efficiency of your infrastructure is not very good because your latencies are increasing as your QPS increases. So like this you can measure and create other MUEs. We will look at how you can visualize this within an environment and so let's look at the demonstration. So let's jump into a sibling CNCF project called Meshery. Meshery is a cloud native management plane. Users of Meshery can configure their Kubernetes deployments any and every service mesh as well as on board and off board their workloads onto any given mesh.\"), mdx(\"img\", {\n    src: MeshMapDemo,\n    alt: \"MeshMap demo\",\n    style: {\n      \"width\": \"40%\",\n      \"cssFloat\": \"right\"\n    }\n  }), mdx(\"h3\", null, \"Lee demonstrates MeshMap with an example Consul application\"), mdx(\"p\", null, \"Let's take an example workload a  Consul application, load it into the visual designer, take a look at the service splitting functionality of console and note in this case we're assigning a weight of three when we can change that to four to derive its MeshMark which is a mesh utilization efficiency calculation of the efficiency by which that network function is being performed. We could also take a look at service intentions of console and examine the efficiency of that network function. Now that you've seen the demo you want to go ahead and publish the results and call everyone to get together.\"), mdx(\"div\", {\n    style: {\n      \"textAlign\": \"center\"\n    }\n  }, mdx(\"iframe\", {\n    width: \"70%\",\n    height: \"450px\",\n    style: {\n      \"marginRight\": \"1.5rem\",\n      \"marginLeft\": \"1.5rem\"\n    },\n    src: \"https://www.youtube.com/embed/yvqn6ckO7BI\",\n    title: \"YouTube video player\",\n    frameBorder: \"0\",\n    allow: \"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\",\n    allowFullScreen: true\n  }), mdx(\"p\", {\n    style: {\n      \"fontStyle\": \"italic\",\n      \"fontSize\": \"1rem\",\n      \"marginLeft\": \"1rem\"\n    }\n  }, \"MeshMark in Meshery (an excerpt from ServiceMeshCon EU 2022 demo)\")), mdx(\"p\", null, mdx(\"strong\", null, \"Lee Calcote and Mrittika Ganguli covered all the concepts of SMP and MeshMark in this great talk. Learn more about MeshMark on the \", mdx(Link, {\n    to: \"https://meshery.io/service-mesh-interface\",\n    mdxType: \"Link\"\n  }, \"Service Mesh Performance \"), \"website.\"))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"MeshMark: Cloud Native Value Measurement","subtitle":null,"date":"May 17th, 2022","author":"Gaurav Chadha","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/webp;base64,UklGRnwAAABXRUJQVlA4IHAAAAAQBACdASoUAAsAPtFUo0uoJKMhsAgBABoJZACdMoADAVZpocZffp7rwAD+8eCe2HI33vty8iA8g87WkluUHUOOVrCnLZT6QrpQ3MgZ8CTBlCyKjycJ5kqTGGOPP80t64fDwjjCC4PKH6lVg+SCeFAA"},"images":{"fallback":{"src":"/static/262c08771cc081196228e58152adc495/c8936/banner.webp","srcSet":"/static/262c08771cc081196228e58152adc495/8d8ff/banner.webp 750w,\n/static/262c08771cc081196228e58152adc495/fc98a/banner.webp 1080w,\n/static/262c08771cc081196228e58152adc495/62268/banner.webp 1366w,\n/static/262c08771cc081196228e58152adc495/c8936/banner.webp 1898w","sizes":"100vw"},"sources":[]},"width":1,"height":0.5600632244467861}},"extension":"webp","publicURL":"/static/262c08771cc081196228e58152adc495/banner.webp"},"darkthumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/webp;base64,UklGRnwAAABXRUJQVlA4IHAAAAAQBACdASoUAAsAPtFUo0uoJKMhsAgBABoJZACdMoADAVZpocZffp7rwAD+8eCe2HI33vty8iA8g87WkluUHUOOVrCnLZT6QrpQ3MgZ8CTBlCyKjycJ5kqTGGOPP80t64fDwjjCC4PKH6lVg+SCeFAA"},"images":{"fallback":{"src":"/static/262c08771cc081196228e58152adc495/f03ce/banner.webp","srcSet":"/static/262c08771cc081196228e58152adc495/46142/banner.webp 125w,\n/static/262c08771cc081196228e58152adc495/2cd09/banner.webp 250w,\n/static/262c08771cc081196228e58152adc495/f03ce/banner.webp 500w,\n/static/262c08771cc081196228e58152adc495/3a00d/banner.webp 1000w","sizes":"(min-width: 500px) 500px, 100vw"},"sources":[]},"width":500,"height":280}},"extension":"webp","publicURL":"/static/262c08771cc081196228e58152adc495/banner.webp"}},"fields":{"slug":"/blog/service-mesh/meshmark-cloud-native-value-measurement"}},{"id":"a8f09cde-c9bd-5f47-b328-0d7aea181ac9","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Pipelining Service Mesh Specifications\",\n  \"subtitle\": \"Using SMI and SMP specs on your CI/CD pipelines with Meshery's GitHub Actions\",\n  \"date\": \"2021-11-09 10:30:05 -0530\",\n  \"author\": \"Layer5 Team\",\n  \"thumbnail\": \"./service-mesh-specifications.webp\",\n  \"darkthumbnail\": \"./service-mesh-specifications.webp\",\n  \"category\": \"Service Mesh\",\n  \"tags\": [\"Service Mesh Interface\", \"Service Mesh Performance\", \"Meshery\"],\n  \"published\": true,\n  \"resource\": true,\n  \"type\": \"Blog\",\n  \"product\": \"Service Mesh Performance\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(BlogWrapper, {\n    mdxType: \"BlogWrapper\"\n  }, mdx(\"p\", null, \"With growing adoption of service meshes in cloud native environments, service mesh abstractions - service mesh-neutral specifications - have emerged. \", mdx(Link, {\n    to: \"/projects/cloud-native-performance\",\n    mdxType: \"Link\"\n  }, \"Service Mesh Performance\"), \"  and \", mdx(Link, {\n    to: \"/projects/service-mesh-interface-conformance\",\n    mdxType: \"Link\"\n  }, \"Service Mesh Interface\"), \" are two open specifications that address the need for universal interfaces for interacting with and managing any type of service mesh. Let\\u2019s examine what each specification provides.\"), mdx(\"img\", {\n    src: smpLogo,\n    className: \"image-left-no-shadow\",\n    alt: \"service mesh performance logo\"\n  }), mdx(\"p\", null, mdx(\"a\", {\n    href: \"https://smp-spec.io\"\n  }, \"Service Mesh Performance\"), \" standardizes service mesh value measurement, characterizing any deployment's performance by capturing the details of infrastructure capacity, service mesh configuration and workload metadata.\"), mdx(\"img\", {\n    src: smiLogo,\n    className: \"image-right-no-shadow\",\n    alt: \"service mesh interface logo\"\n  }), mdx(\"p\", null, mdx(\"a\", {\n    href: \"https://smi-spec.io\"\n  }, \"Service Mesh Interface\"), \" provides a standard interface for service meshes on Kubernetes. These (currently) four specfications offer a common denominator set of interfaces to support most common service mesh use cases and the flexibility to evolve to support new service mesh capabilities over time.\"), mdx(\"p\", null, \"As a service mesh agnostic tool that provides lifecycle and performance management of a large number of (10+) service meshes, Kubernetes applications, service mesh patterns and WebAssembly filters, Meshery is the ideal tool for the job when it comes to implementing these specifications.\"), mdx(\"p\", null, \"Meshery also comes with two new GitHub Actions that do exactly this. The \", mdx(\"a\", {\n    href: \"https://github.com/layer5io/meshery-smi-conformance-action\"\n  }, \"Meshery SMI Conformance Action\"), \" which \", mdx(\"a\", {\n    href: \"https://meshery.io/blog/validating-smi-conformance-with-meshery\"\n  }, \"validates SMI conformance\"), \" in your pipeline and the \", mdx(\"a\", {\n    href: \"https://github.com/layer5io/meshery-smp-action\"\n  }, \"Meshery SMP Action\"), \" which runs \", mdx(\"a\", {\n    href: \"https://docs.meshery.io/functionality/performance-management\"\n  }, \"SMP compatible performance benchmarks\"), \".\"), mdx(\"p\", null, \"But how do we use these actions? What do they offer? Let\\u2019s find out!\"), mdx(\"h2\", null, \"Service Mesh Interface Conformance GitHub Action\"), mdx(\"p\", null, \"Conformance of SMI specifications is defined as a series of test assertions. These test assertions are categorised by SMI specification (of which, there are currently four specifications) and comprise the complete suite of SMI conformance tests. Conformance requirements will change appropriately as each new version of the SMI spec is released. Refer to Meshery's documentation for details of how \", mdx(\"a\", {\n    href: \"https://docs.meshery.io/functionality/service-mesh-interface\"\n  }, \"Meshery performs SMI conformance\"), \".\"), mdx(\"img\", {\n    src: githubBlack,\n    className: \"image-left-no-shadow\",\n    style: {\n      \"maxWidth\": \"9vw\"\n    }\n  }), mdx(\"h3\", null, \"Using Meshery's SMI Conformance GitHub Action\"), mdx(\"p\", null, \"The \", mdx(\"a\", {\n    href: \"https://github.com/marketplace/actions/service-mesh-interface-conformance-with-meshery\"\n  }, \"Service Mesh Interface Conformance GitHub Action\"), \" is available in the GitHub Marketplace. You can configure this action to trigger with each of your releases, on every pull request. or any GitHub workflow trigger event.\"), mdx(\"p\", null, \"An example of the action configuration which runs on every release is shown below. The action handles setting up a Kubernetes environment, deploying the service mesh (see supported service meshes), running the conformance tests and reporting back the results to the SMI Conformance dashboard in Meshery.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"name: SMI Conformance with Meshery\\non:\\n  push:\\n    tags:\\n      - 'v*'\\n\\njobs:\\n  smi-conformance:\\n    name: SMI Conformance\\n    runs-on: ubuntu-latest\\n    steps:\\n\\n      - name: SMI conformance tests\\n        uses: layer5io/mesheryctl-smi-conformance-action@master\\n        with:\\n          provider_token: ${{ secrets.MESHERY_PROVIDER_TOKEN }}\\n          service_mesh: open_service_mesh\\n          mesh_deployed: false\\n\")), mdx(\"p\", null, \"You can also bring in their own cluster with specific capabilities and with a service mesh already installed.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"name: SMI Conformance with Meshery\\non:\\n  push:\\n    branches:\\n      - 'master'\\n\\njobs:\\n  smi-conformance:\\n    name: SMI Conformance tests on master\\n    runs-on: ubuntu-latest\\n    steps:\\n\\n      - name: Deploy k8s-minikube\\n        uses: manusa/actions-setup-minikube@v2.4.1\\n        with:\\n          minikube version: 'v1.21.0'\\n          kubernetes version: 'v1.20.7'\\n          driver: docker\\n\\n      - name: Install OSM\\n        run: |\\n           curl -LO https://github.com/openservicemesh/osm/releases/download/v0.9.1/osm-v0.9.1-linux-amd64.tar.gz\\n           tar -xzf osm-v0.9.1-linux-amd64.tar.gz\\n           mkdir -p ~/osm/bin\\n           mv ./linux-amd64/osm ~/osm/bin/osm-bin\\n           PATH=\\\"$PATH:$HOME/osm/bin/\\\"\\n           osm-bin install --osm-namespace default\\n\\n      - name: SMI conformance tests\\n        uses: layer5io/mesheryctl-smi-conformance-action@master\\n        with:\\n          provider_token: ${{ secrets.MESHERY_PROVIDER_TOKEN }}\\n          service_mesh: open_service_mesh\\n          mesh_deployed: true\\n\")), mdx(\"p\", null, \"You can download a token from Meshery and add it as a GitHub secret (in the example above, the secret is \", mdx(\"code\", null, \"MESHERY_PROVIDER_TOKEN\"), \"). After the test is run, you can view the results from the Service Mesh Interface dashboard in Meshery UI.\"), mdx(\"p\", {\n    align: \"center\"\n  }, mdx(\"img\", {\n    src: smidashboard,\n    className: \"image-center-shadow\",\n    style: {\n      \"width\": \"70%\"\n    },\n    alt: \"smi conformance dashboard\"\n  }), \" \", mdx(\"br\", null), mdx(\"i\", null, \"Meshery's Service Mesh Interface Conformance Results\")), mdx(\"p\", null, \"Participating service mesh projects can also \", mdx(\"a\", {\n    href: \"https://docs.meshery.io/functionality/service-mesh-interface#reporting-conformance\"\n  }, \"automatically report their conformance test results\"), \" to the \", mdx(\"a\", {\n    href: \"https://meshery.io/service-mesh-interface\"\n  }, \"SMI Conformance dashboard\")), mdx(\"h2\", null, \"Service Mesh Performance GitHub Action\"), mdx(\"p\", null, \"Measuring and managing the performance of a service mesh is key to efficient operation of any service mesh. Meshery is the canonical implementation of the Service Mesh Performance specification. You can choose from multiple load generators and use a highly configurable set of load profiles with variable tunable facets to run a performance test. Meshery packages all these features into an easy-to-use GitHub Action.\"), mdx(\"img\", {\n    src: githubBlack,\n    className: \"image-left-no-shadow\",\n    style: {\n      \"maxWidth\": \"9vw\"\n    }\n  }), mdx(\"h3\", null, \"Using Meshery's Service Mesh Performance GitHub Action\"), mdx(\"p\", null, \"The \", mdx(\"a\", {\n    href: \"https://github.com/marketplace/actions/performance-testing-with-meshery\"\n  }, \"Service Mesh Performance GitHub Action\"), \" is available in the GitHub Marketplace.You can create your own performance profiles to run repeatable tests with Meshery. You can configure this action to trigger with each of your releases, on every pull request. or any GitHub workflow trigger event. A sample configuration of the action is shown below.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"name: Meshery SMP Action\\non:\\n  push:\\n    branches:\\n      'master'\\n\\njobs:\\n  performance-test:\\n    name: Performance Test\\n    runs-on: ubuntu-latest\\n    steps:\\n      - name: checkout\\n        uses: actions/checkout@v2\\n        with:\\n          ref: 'perf'\\n\\n      - name: Deploy k8s-minikube\\n        uses: manusa/actions-setup-minikube@v2.4.1\\n        with:\\n          minikube version: 'v1.21.0'\\n          kubernetes version: 'v1.20.7'\\n          driver: docker\\n\\n      - name: Run Performance Test\\n        uses: layer5io/meshery-smp-action@master\\n        with:\\n          provider_token: ${{ secrets.PROVIDER_TOKEN }}\\n          platform: docker\\n          profile_name: soak-test\\n\")), mdx(\"p\", null, \"You can also define your test configuration in an SMP compatible configuration file as shown below.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-yaml\"\n  }, \"smp_version: v0.0.1\\nid:\\nname: Istio Performance Test\\nlabels: {}\\nclients:\\n- internal: false\\n  load_generator: fortio\\n  protocol: 1\\n  connections: 2\\n  rps: 10\\n  headers: {}\\n  cookies: {}\\n  body: \\\"\\\"\\n  content_type: \\\"\\\"\\n  endpoint_urls:\\n  - http://localhost:2323/productpage\\nduration: \\\"30m\\\"\\n\")), mdx(\"p\", null, \"See this sample GitHub workflow (\", mdx(\"a\", {\n    href: \"https://github.com/layer5io/meshery-smp-action/blob/master/action.yml\"\n  }, \"action.yml\"), \") for more configuration details.\"), mdx(\"img\", {\n    src: perfdashboard,\n    className: \"image-center\",\n    alt: \"performance management dashboard\"\n  }), mdx(\"p\", null, \"The results from the tests are updated on the Performance Management dashboard in Meshery. To learn more about interpreting the test results, check out \", mdx(\"a\", {\n    href: \"https://docs.meshery.io/guides/interpreting-performance-test-results\"\n  }, \"this guide\"), \". You can always checkout the \", mdx(\"a\", {\n    href: \"https://docs.meshery.io/guides\"\n  }, \"Meshery User Guides\"), \" to dive deep into these features.\"), mdx(\"p\", null, \"Stay meshy!\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Pipelining Service Mesh Specifications","subtitle":"Using SMI and SMP specs on your CI/CD pipelines with Meshery's GitHub Actions","date":"November 9th, 2021","author":"Layer5 Team","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/webp;base64,UklGRnwAAABXRUJQVlA4IHAAAAAwBACdASoUAAsAPtFWo0uoJKMhsAgBABoJQAqP23yHCf3s8zj7Q4Ot54AA/vYSdhBu5a5XcB/63qjz5sojm43GF+2H9fEBMTKbmVPEU59GLBaiyKva9gYciPhcLWvnHZREEmuIToMwwyupq3UEwAAA"},"images":{"fallback":{"src":"/static/81aa70f0509f2123d8f460d3633f063c/e9d78/service-mesh-specifications.webp","srcSet":"/static/81aa70f0509f2123d8f460d3633f063c/a66aa/service-mesh-specifications.webp 750w,\n/static/81aa70f0509f2123d8f460d3633f063c/65dd5/service-mesh-specifications.webp 1080w,\n/static/81aa70f0509f2123d8f460d3633f063c/4fad6/service-mesh-specifications.webp 1366w,\n/static/81aa70f0509f2123d8f460d3633f063c/e9d78/service-mesh-specifications.webp 1600w","sizes":"100vw"},"sources":[]},"width":1,"height":0.5625}},"extension":"webp","publicURL":"/static/81aa70f0509f2123d8f460d3633f063c/service-mesh-specifications.webp"},"darkthumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/webp;base64,UklGRnwAAABXRUJQVlA4IHAAAAAwBACdASoUAAsAPtFWo0uoJKMhsAgBABoJQAqP23yHCf3s8zj7Q4Ot54AA/vYSdhBu5a5XcB/63qjz5sojm43GF+2H9fEBMTKbmVPEU59GLBaiyKva9gYciPhcLWvnHZREEmuIToMwwyupq3UEwAAA"},"images":{"fallback":{"src":"/static/81aa70f0509f2123d8f460d3633f063c/cd07d/service-mesh-specifications.webp","srcSet":"/static/81aa70f0509f2123d8f460d3633f063c/46142/service-mesh-specifications.webp 125w,\n/static/81aa70f0509f2123d8f460d3633f063c/81c3e/service-mesh-specifications.webp 250w,\n/static/81aa70f0509f2123d8f460d3633f063c/cd07d/service-mesh-specifications.webp 500w,\n/static/81aa70f0509f2123d8f460d3633f063c/bf95e/service-mesh-specifications.webp 1000w","sizes":"(min-width: 500px) 500px, 100vw"},"sources":[]},"width":500,"height":281}},"extension":"webp","publicURL":"/static/81aa70f0509f2123d8f460d3633f063c/service-mesh-specifications.webp"}},"fields":{"slug":"/blog/service-mesh/pipelining-service-mesh-specifications"}},{"id":"c0ba14fc-089b-5939-abc8-083252a26606","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Service Mesh Specifications and Why They Matter\",\n  \"date\": \"2021-09-20 10:30:05 -0530\",\n  \"author\": \"Debopriya Bhattacharjee\",\n  \"thumbnail\": \"./Cover-image.webp\",\n  \"darkthumbnail\": \"./Cover-image.webp\",\n  \"category\": \"Service Mesh\",\n  \"tags\": [\"Projects\", \"Service Mesh Interface\", \"Service Mesh Performance\"],\n  \"published\": true,\n  \"resource\": true,\n  \"type\": \"Blog\",\n  \"product\": \"Service Mesh Performance\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(BlogWrapper, {\n    mdxType: \"BlogWrapper\"\n  }, mdx(\"div\", {\n    className: \"intro \"\n  }, mdx(\"p\", null, mdx(Link, {\n    to: \"/community/members/lee-calcote\",\n    mdxType: \"Link\"\n  }, \"Lee Calcote\"), \" is an innovator, product and technology leader, active in the community as a Docker Captain, Cloud Native Ambassador and GSoC, GSoD, and Community Bridge Mentor. In this talk, he walked through service mesh specifications and why they matter in your deployment. How many service mesh specifications do you know? He went through all of them. So, no worries if you're unfamiliar.\")), mdx(\"h3\", null, \"Service Mesh Specifications:\"), mdx(\"img\", {\n    src: Abstractions,\n    className: \"slides-left\",\n    align: \"left\",\n    alt: \"abstractions\"\n  }), mdx(\"p\", null, \"As the ubiquity of service meshes unfolds and they become a commonplace for any cloud native or edge environment, so does the need for vendor and technology-agnostic interfaces to interact with them. The Service Mesh Interface (SMI), the Service Mesh Performance (SMP), and Multi-Vendor Service Mesh Interoperation (Hamlet) are three open specifications solving the challenge of interoperability, workload and performance management between service meshes. \"), mdx(\"p\", null, \"Learn what makes each of them unique and why they are much needed. See each of these three specifications in action as we use Meshery, the open-source service mesh management plane to demonstrate the value and functionality of each service mesh abstraction, and the adherence of these specifications by Istio, Linkerd, Consul and other popular service meshes.\"), mdx(\"h3\", null, \"Cloud native Journey to service meshes:\"), mdx(\"img\", {\n    src: Journey,\n    className: \"slides-right\",\n    align: \"right\",\n    alt: \"journey-image\"\n  }), mdx(\"p\", null, \"The advent of cloud native was the popularization of containers. Thank you Docker! From there, containers took off like wildfire. Turns out you need an orchestrator to wrangle that sprawl. We saw a number of orchestrators come and we still have a number of orchestrators around.\"), mdx(\"p\", null, \"Service meshes have become a hot topic in the last few years. They still continue to be, rightfully so, a very powerful piece of technology. \\u201CA lot of the power is yet to come from my perspective. For my part, I believe that there is a tomorrow in which data plane intelligence really matters. And matters about how people write cloud native applications.\\u201D, Lee emphasized. Not everyone quite understands the capabilities of meshes as they are promoted and spoken about today. So come along into the journey of service mesh.\"), mdx(\"p\", null, \"There are a number of service meshes out there. One of the community projects is to track the landscape of all of the meshes there are. There\\u2019s a lot to say about each of them, their architecture, and their working. Why are they made? Who are they focused on? What do they do? When did they come about? Why are some of them not here anymore? Why are we still seeing new ones? A lot of things to go through. You might be interested in any number of the details that the landscape tracks.\"), mdx(\"div\", {\n    className: \"note\"\n  }, \"Be Aware, It's Meshy Out There!\"), mdx(\"h3\", null, \"Service Mesh Interface\"), mdx(\"img\", {\n    src: SMI,\n    className: \"slides-left\",\n    align: \"left\",\n    alt: \"smi-image\"\n  }), mdx(\"ul\", null, mdx(\"li\", null, \"Its goal and genesis were born inside of Kubernetes.\"), mdx(\"li\", null, \" Being a specification that is native to Kubernetes, its focus is on lowest common denominator functionality.\"), mdx(\"li\", null, \" The focus on bringing forth APIs that highlight and reinforce the most common use cases that service meshes are being used for currently\"), mdx(\"li\", null, \"Leaves space and provides extensibility room for additional APIs to address other service mesh functionality as more people adopt and make use cases well known.\"), mdx(\"li\", null, \"There are seven service meshes that claim compatibility with SMI. There's been a community effort, open-source effort to create service mesh conformance tests to assert whether or not a given service mesh is compatible with SMI\"), mdx(\"li\", null, \" In order to facilitate those types of tests, you need to have a tool to provision a sample application on those services which will generate load and test whether traffic splitting behaves as expected or works with that service mesh implementation properly.\"), mdx(\"li\", null, \"Then you need to be able to collect the results, guarantee the provenance of those results and publish them.\"), mdx(\"li\", null, \" As a community, we turned to Meshery as the tool to implement \", mdx(Link, {\n    to: \"/projects/service-mesh-interface-conformance\",\n    mdxType: \"Link\"\n  }, \"SMI conformance\"), \" and we have been working with the individual service meshes to validate their conformance. \")), mdx(\"b\", null, \"Meshery\"), mdx(\"ul\", null, mdx(\"li\", null, \" We work on an open-source project called \", mdx(Link, {\n    to: \"/cloud-native-management/meshery\",\n    mdxType: \"Link\"\n  }, \"Meshery\"), \".\"), mdx(\"li\", null, \" Meshery, the cloud native management plane, is the canonical implementation of the service mesh performance.\"), mdx(\"li\", null, \"The management planes can do a number of things to help bridge the divide between other back-end systems and service meshes. They also help performance management, configuration management, making sure you are following best practices in your implementations by taking common patterns and applying them to your environment \")), \"Let's take a moment to demo what it looks like to validate conformance in SMI using Meshery.\", mdx(\"img\", {\n    src: Graph,\n    className: \"slides-left\",\n    align: \"left\",\n    alt: \"graph\"\n  }), mdx(\"ul\", null, mdx(\"li\", null, \" We need to spin up Meshery locally\"), mdx(\"li\", null, \" We use mesheryctl as the command line interface to work with Meshery.\"), mdx(\"li\", null, \" We can interact with a number of different service mesh. The service mesh we\\u2019re going to work with today is an Open service mesh (one of those 7 that is compatible with SMI). Let\\u2019s put it to the test.\"), mdx(\"li\", null, \" We'll initiate \", mdx(Link, {\n    to: \"/projects/service-mesh-interface-conformance\",\n    mdxType: \"Link\"\n  }, \"SMI conformance\")), mdx(\"li\", null, \"These tests go and do assertions across these different specifications. We\\u2019re looking at traffic access, traffic splitting, traffic specification. Meshery then collects these results and will eventually be publishing them in combination with the SMI project.\")), mdx(\"h3\", null, \"Service Mesh Performance\"), mdx(\"img\", {\n    src: SMP,\n    className: \"slides-right\",\n    align: \"right\",\n    alt: \"smp-image\"\n  }), mdx(\"ul\", null, mdx(\"li\", null, \"Focused on describing and capturing the performance of a service mesh.\"), mdx(\"li\", null, \"The overhead of the value is another way of looking at it and characterizing it.\"), mdx(\"li\", null, \"Trying to characterize the performance of the infrastructure of a service mesh can be really difficult.\"), mdx(\"li\", null, \"Considering the number of variables that you would have to track, how difficult it can be to have repeatable tests, and benchmark your environment, to track your history based on your environment, compare performance between other meshes people need.\"), mdx(\"li\", null, \"SMP creates a standard way of capturing the performance of the mesh to help with these issues.\"), mdx(\"li\", null, \"It's also the way in which you're configuring your control plan of your service mesh.\")), mdx(\"p\", null, \"You might be using a client library to do some service mesh functionality. Maybe you're using those in combination with the service mesh. What costs more? What's more efficient? What's more powerful? Maybe you're using web assembly and filters there.\\nThese are all open questions that \", mdx(Link, {\n    to: \"/projects/cloud-native-performance\",\n    mdxType: \"Link\"\n  }, \"SMP\"), \" assists in answering in your environment. You\\u2019d be surprised by some of the results of some tests that we have done and that the community has done in combination with a couple of universities and graduate students.\"), mdx(\"b\", null, \"Performance Test\"), mdx(\"p\", null, \"Demonstration of the implementation of service mesh Performance:\"), mdx(\"img\", {\n    src: Flowchart,\n    className: \"slides-left\",\n    align: \"left\",\n    alt: \"flowchart\"\n  }), mdx(\"ul\", null, mdx(\"li\", null, \" On the terminal, we have a local deployment of Meshery running. You can also deploy on Kubernetes as well as the vendor Kubernetes platforms like AKS, EKS and GCP or you can use a dockerized container to run Meshery. You can also have your Kubernetes on Docker desktop.\"), mdx(\"li\", null, \"We have the Open service mesh deployed.\"), mdx(\"li\", null, \" The Meshery UI is exposed at 9081 port. This is the UI which is used to instantiate a Load test.\"), mdx(\"li\", null, \" Over here you can see we have 3 load generators fortio, wrk2, nighthawk.\"), mdx(\"li\", null, \" All of these load generators have their own set of attributes which they record correctly and each of its attributes have their own significance. We begin with fortio.\"), mdx(\"img\", {\n    src: Bucket,\n    className: \"slides-right\",\n    align: \"right\",\n    alt: \"graph\"\n  }), mdx(\"li\", null, \" You can actually download the test results or you can just browse into the Results Tab and see all of the tests which you have run until now.\"), mdx(\"li\", null, \"Next, we used nighthawk to generate the load and benchmark the service for the same. Nighthawk is a load generator which is maintained by the Envoy community and is relatively new. It still hasn't got its 1.0 release but right now Nighthawk has sufficient features to compete with different generators which are still in the play. It can generate a gRPC service on its own and it has some more attributes which you can expose using their CLI tools.\"), mdx(\"li\", null, \" You can also see that Meshery has the capability to search your environment, see what specifications are being used and what's the load on your Kubernetes.\"), mdx(\"li\", null, \"Jump into the results Tab and see how we compare with these results.\"), mdx(\"li\", null, \"You can click on the download. You will see that a yaml gets downloaded in which you can browse and see that the start time, load time, the performance latencies, the metrics are being captured.\")), mdx(\"h3\", null, \"Hamlet or Multi-vendor Service Mesh Interoperation\"), mdx(\"img\", {\n    src: Hamlet,\n    className: \"slides-left\",\n    align: \"left\",\n    alt: \"hamlet-image\"\n  }), mdx(\"ul\", null, mdx(\"li\", null, \"Focus on service mesh federation\"), mdx(\"li\", null, \"Specifies a set of API standards for enabling service mesh federation\"), mdx(\"li\", null, \"Hamlet takes on a client-server architecture in which resources and services of one service mesh are discovered, registered and using a common format, information about them is exchanged between different service mesh.\"), mdx(\"li\", null, \"Rules around authentication and authorization rules around which Services get exposed and to whom and who can communicate with them and whether or not they can do it securely. These are things that Hamlet addresses.\"), mdx(\"li\", null, \"The specification currently consists of two APIs:\", mdx(\"ul\", null, mdx(\"li\", null, mdx(\"strong\", null, \"The Federated Resource Discovery API\"), \": API to authenticate and securely distribute resources between federated service meshes.\"), mdx(\"li\", null, \"The \", mdx(\"strong\", null, \"Federated Service Discovery API\"), \": API to discover, reach, authenticate and securely communicate with federated services.\"))), mdx(\"li\", null, \"Part of the real power is the ability to overcome what are likely to be separate administrative domains. The intention here is to marry up connect two disparate service mesh deployments, those deployments might be of the same type, they might be of two different types.\")), mdx(\"p\", null, \"In addition to SMI, SMP and Hamlet there has been an emergence of service mesh patterns, by which people are running and operating service meshes. There is a service mesh working group under CNCFs network that is helping identify those patterns of which there's a list right now unbeknownst to you. Reach out, join it, help us work through the 60 patterns that are defined right now. 30 of those are going into an \", mdx(Link, {\n    to: \"/learn/service-mesh-books\",\n    mdxType: \"Link\"\n  }, \"O\\u2019Reilly\"), \" book called \", mdx(Link, {\n    to: \"/learn/service-mesh-books/service-mesh-patterns\",\n    mdxType: \"Link\"\n  }, \"Service Mesh Patterns\"), \".\"), mdx(\"p\", null, \"Something that isn\\u2019t always obvious to folks is this piece of value that people get from a service mesh and actually from the specifications that we were just mentioning. It is the fact that teams are decoupled when you\\u2019re running a mesh. Developers get to iterate a bit independently of operators, and so do operators get to make changes to implement infrastructure to the way that applications behave independent of developers in the presence of a mesh.  Both of these teams are significantly empowered. Everybody gets a piece of power when they deploy a mesh.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, mdx(\"strong\", {\n    parentName: \"em\"\n  }, \"P.S.: If these topics excite  come and say \\\"Hi\\\" on our \", mdx(\"a\", {\n    parentName: \"strong\",\n    \"href\": \"http://slack.layer5.io\"\n  }, \"Slack Channel\"), \" and one of us will reach out to you!\")))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Service Mesh Specifications and Why They Matter","subtitle":null,"date":"September 20th, 2021","author":"Debopriya Bhattacharjee","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/webp;base64,UklGRnYAAABXRUJQVlA4IGoAAAAQBACdASoUAAsAPtFUo0uoJKMhsAgBABoJbACdMoR3N4AAWScxK3A0AAD+y+7TltDm8faWnWkrgNwKEaB+a5F7h6kfv+PNmIbiHtDLJbrKy70mpaSz/NUvAS+UKSii+WgoY4/+Ld6wAAAA"},"images":{"fallback":{"src":"/static/f9e70b0d102359852501532eaf88c857/92e8b/Cover-image.webp","srcSet":"/static/f9e70b0d102359852501532eaf88c857/a66aa/Cover-image.webp 750w,\n/static/f9e70b0d102359852501532eaf88c857/65dd5/Cover-image.webp 1080w,\n/static/f9e70b0d102359852501532eaf88c857/f9724/Cover-image.webp 1366w,\n/static/f9e70b0d102359852501532eaf88c857/92e8b/Cover-image.webp 1920w","sizes":"100vw"},"sources":[]},"width":1,"height":0.5630208333333334}},"extension":"webp","publicURL":"/static/f9e70b0d102359852501532eaf88c857/Cover-image.webp"},"darkthumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/webp;base64,UklGRnYAAABXRUJQVlA4IGoAAAAQBACdASoUAAsAPtFUo0uoJKMhsAgBABoJbACdMoR3N4AAWScxK3A0AAD+y+7TltDm8faWnWkrgNwKEaB+a5F7h6kfv+PNmIbiHtDLJbrKy70mpaSz/NUvAS+UKSii+WgoY4/+Ld6wAAAA"},"images":{"fallback":{"src":"/static/f9e70b0d102359852501532eaf88c857/cd07d/Cover-image.webp","srcSet":"/static/f9e70b0d102359852501532eaf88c857/46142/Cover-image.webp 125w,\n/static/f9e70b0d102359852501532eaf88c857/81c3e/Cover-image.webp 250w,\n/static/f9e70b0d102359852501532eaf88c857/cd07d/Cover-image.webp 500w,\n/static/f9e70b0d102359852501532eaf88c857/bf95e/Cover-image.webp 1000w","sizes":"(min-width: 500px) 500px, 100vw"},"sources":[]},"width":500,"height":281}},"extension":"webp","publicURL":"/static/f9e70b0d102359852501532eaf88c857/Cover-image.webp"}},"fields":{"slug":"/blog/service-mesh/service-mesh-specifications-and-why-they-matter"}},{"id":"41186fe5-9702-5f79-9115-7013aba6492e","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Announcing the Meshery Adapter for Open Service Mesh\",\n  \"subtitle\": \"Adding another service mesh to the landscape and another adapter to Meshery\",\n  \"date\": \"2020-08-20 10:17:05 +0000\",\n  \"author\": \"Lee Calcote\",\n  \"thumbnail\": \"./meshery-open-service.webp\",\n  \"darkthumbnail\": \"./meshery-open-service.webp\",\n  \"category\": \"Service Mesh\",\n  \"tags\": [\"Meshery\", \"Service Mesh\"],\n  \"published\": true,\n  \"resource\": true,\n  \"type\": \"Blog\",\n  \"product\": \"Meshery\",\n  \"mesh\": \"Open Service Mesh\",\n  \"redirect_from\": [\"/blog/meshery/announcing-the-meshery-adapter-for-open-service-mesh/\", \"/blog/open-service-mesh/announcing-the-meshery-adapter-for-open-service-mesh\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(BlogWrapper, {\n    mdxType: \"BlogWrapper\"\n  }, mdx(\"p\", null, \"Released on August 5th, 2020 by Microsoft, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://openservicemesh.io/\"\n  }, \"Open Service Mesh\"), \" (OSM) is a lightweight and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://layer5.io/smi\"\n  }, \"Service Mesh Interace conformant\"), \" (SMI). Open Service Mesh is a contemporary addition to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/service-mesh-landscape\"\n  }, \"service mesh landscape\"), \". Using Envoy as its data plane proxy component and SMI specifications as it's control plane APIs, OSM draws lessons and code from existing service mesh projects, like Linkerd. The Open Service Mesh project has some miles to go as it is one of a growing list of choices available in the service mesh landscape.\"), mdx(\"p\", null, \"First pronounced to be SMI compliant by \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://meshery.io/\"\n  }, \"Meshery\"), \", the cloud native management plane, the first release of OSM supports a myriad of basic\"), mdx(\"ul\", null, mdx(\"li\", null, \"Securing service to service links\"), mdx(\"li\", null, \"Supporting traffic shifting\"), mdx(\"li\", null, \"Managing observability for your services\"), mdx(\"li\", null, \"Validating and Implementing access control policies\"), mdx(\"li\", null, \"Auto addition of applications and services\")), mdx(\"h3\", null, \"Get started with OSM using Meshery\"), mdx(\"p\", null, \"In Layer5's effort to support our multi-mesh world, our Meshery project provides an effortless way for Kubernetes operators to install, maintain and run service meshes. \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/layer5io/meshery/releases/tag/v0.4.3\"\n  }, \"Meshery v0.4.3\"), \" includes the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/layer5io/meshery-osm\"\n  }, \"Meshery Adapter for Open Service Mesh\"), \", enabling you to quickly provision OSM, run any number of sample applications, manage its performance using \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://smp-spec.io/\"\n  }, \"Service Mesh Performance\"), \" (SMP), validate OSM's compliance to SMI using a suite of conformance tests. Meshery offers configuraiton management with builtin best practice configuration analysis giving you confidence in applying custom configuration to OSM. Meshery's documenation on the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.meshery.io/service-meshes/adapters/osm\"\n  }, \"Open Service Mesh integation\"), \" provides a complete walkthrough on how to get set up, install, deploy and configure OSM according to your needs.\"), mdx(\"img\", {\n    src: conformance,\n    className: \"\",\n    alt: \"meshery-smi-conformance-results-image\"\n  }), mdx(\"p\", null, \"Try Open Service Mesh now, by \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"/cloud-native-management/meshery/getting-started\"\n  }, \"getting started with Meshery\"), \".\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Announcing the Meshery Adapter for Open Service Mesh","subtitle":"Adding another service mesh to the landscape and another adapter to Meshery","date":"August 20th, 2020","author":"Lee Calcote","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/webp;base64,UklGRnwAAABXRUJQVlA4IHAAAABQAwCdASoUAAoAPtFUo0uoJKMhsAgBABoJQBdgBDvIHyHlAAD+9R5BqQSsiWNeJNqE7PLbzQ9M/Tvb9CSqaIr+n2R5upIraZpU7CzXHZesE7BZyYNioCJXqMKKJGxFbL89G+X6eR3+pLo8zCJoAAAA"},"images":{"fallback":{"src":"/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/770cd/meshery-open-service.webp","srcSet":"/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/280d5/meshery-open-service.webp 750w,\n/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/5b49f/meshery-open-service.webp 1080w,\n/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/f8bdf/meshery-open-service.webp 1366w,\n/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/770cd/meshery-open-service.webp 1920w","sizes":"100vw"},"sources":[]},"width":1,"height":0.5010416666666666}},"extension":"webp","publicURL":"/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/meshery-open-service.webp"},"darkthumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/webp;base64,UklGRnwAAABXRUJQVlA4IHAAAABQAwCdASoUAAoAPtFUo0uoJKMhsAgBABoJQBdgBDvIHyHlAAD+9R5BqQSsiWNeJNqE7PLbzQ9M/Tvb9CSqaIr+n2R5upIraZpU7CzXHZesE7BZyYNioCJXqMKKJGxFbL89G+X6eR3+pLo8zCJoAAAA"},"images":{"fallback":{"src":"/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/cd5ef/meshery-open-service.webp","srcSet":"/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/f6072/meshery-open-service.webp 125w,\n/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/cb4bd/meshery-open-service.webp 250w,\n/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/cd5ef/meshery-open-service.webp 500w,\n/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/9306b/meshery-open-service.webp 1000w","sizes":"(min-width: 500px) 500px, 100vw"},"sources":[]},"width":500,"height":250}},"extension":"webp","publicURL":"/static/1e896538fdd2f9faaa30e0b7dd7f2f6a/meshery-open-service.webp"}},"fields":{"slug":"/blog/service-mesh/announcing-the-meshery-adapter-for-open-service-mesh"}},{"id":"47a58ab5-c67e-52d4-ae1d-1623eeab8aed","body":"var _excluded = [\"components\"];\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"title\": \"Service Mesh (Istio) patterns for Multitenancy\",\n  \"subtitle\": \"\",\n  \"date\": \"2020-07-18 10:30:05 -0530\",\n  \"author\": \"Sudeep Batra\",\n  \"thumbnail\": \"./image2.webp\",\n  \"darkthumbnail\": \"./image2.webp\",\n  \"category\": \"Service Mesh\",\n  \"tags\": [\"Service Mesh\", \"Open Source\", \"Istio\"],\n  \"published\": true,\n  \"type\": \"Blog\",\n  \"technology\": \"Kubernetes\",\n  \"mesh\": \"Istio\",\n  \"resource\": true,\n  \"redirect_from\": [\"/blog/service-mesh-patterns-for-multitenancy/\"]\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(BlogWrapper, {\n    mdxType: \"BlogWrapper\"\n  }, mdx(\"img\", {\n    src: listioLayer5,\n    className: \"image-left\",\n    alt: \"Layer5 and Istio\"\n  }), mdx(\"p\", null, \"Recently, I started learning on Service Mesh and it was a very interesting journey as I explored the Service Mesh\\nlandscape starting with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/layer5io/istio-service-mesh-workshop\"\n  }, \"Layer5 tutorials\"), \" and by exploring\\nthe blogs at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://istio.io/\"\n  }, \"Istio.io\"), \".\"), mdx(\"p\", null, \"Our organization decided to use the features of Istio for securing, managing and automating microservices. However, we have to support a multi-tenant environment and that became a challenge due to lack of sufficient documentation and clarity. To give a little bit of background on the problem, we have a single cluster with multiple tenants in different namespaces sharing the same cluster . We do not want to provide each tenant their own separate Kubernetes Cluster because that would be additional provisioning overhead, management overhead and also additional resource overhead on the platform.\"), mdx(\"p\", null, \"In this blog, I will go over the concepts and visual representation as well as the steps to learn and build your setup.\\nNow there are different combinations possible depending on the requirements. These could be :\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Single Istio Control Plane with its own Ingress-Gateway to ensure traffic for the control plane is coming via the same control plane Ingress-Gateway.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"One or more Workspace namespaces for the workload applications and each with its own instance of the ingress gateway\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"More advanced scenario would be multiple Control Plane and its associated Data Plane or essentially Multiple Service Mesh within a single Kubernetes Cluster. This is presently feasible using the Maistra Istio Operator, but its not fully supported using the upstream Istio at present. I intend to go over this use case in a later article.\")), mdx(\"p\", null, \"Here by Ingress Gateway we mean the Istio Ingress Gateway and not the Kubernetes Ingress Gateway.\\nNow, before we get into the steps for building an Istio Multi-tenant setup, lets quickly review the prerequisite :\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Kubernetes setup (in the steps below I am using v1.18 on ubuntu 18.04)\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ sudo apt-get install -y docker.io\\n$ sudo sh -c \\u201Cecho \\u2018deb http://apt.kubernetes.io/ kubernetes-xenial main\\u2019 >> /etc/apt/sources.list.d/kubernetes.list\\u201D\\n$ sudo sh -c \\u201Ccurl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -\\u201D\\n$ sudo apt-get update\\n$ sudo apt-get install -y kubeadm=1.18.1\\u201300 kubelet=1.18.1\\u201300 kubectl=1.18.1\\u201300\\n$ sudo kubeadm init \\u2014 kubernetes-version 1.18.1 \\u2014 pod-network-cidr 192.168.0.0/16\\n$ mkdir -p $HOME/.kube\\n$ sudo cp -i /etc/kubernetes/admin.conf $HOME/.kube/config\\n$ sudo chown $(id -u):$(id -g) $HOME/.kube/config\\n$ kubectl apply -f https://docs.projectcalico.org/manifests/calico.yaml\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Get the latest istioctl binary\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ curl -L https://git.io/getLatestIstio | sh -\\ncd istio-*\\nexport PATH=$PWD/bin:$PATH\\nistioctl version\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Initialize the Istio Operator\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ istioctl operator init\\nUsing operator Deployment image: docker.io/istio/operator:1.6.3\\n\\u2714 Istio operator installed\\n\\u2714 Installation complete\\n$ kubectl get all -n istio-operator\\nNAME READY STATUS RESTARTS AGE\\npod/istio-operator-5998f6c744-vrkbk 1/1 Running 1 78m\\nNAME TYPE CLUSTER-IP EXTERNAL-IP PORT(S) AGE\\nservice/istio-operator ClusterIP 10.107.183.94 <none> 8383/TCP 78m\\nNAME READY UP-TO-DATE AVAILABLE AGE\\ndeployment.apps/istio-operator 1/1 1 1 78m\\nNAME DESIRED CURRENT READY AGE\\nreplicaset.apps/istio-operator-5998f6c744 1 1 1 78m\\n\")))), mdx(\"p\", null, \"Next we will look into the details of the multitenancy scenarios; but before that a few word on the Istio operator would be nice. The Istio Operator follows the Kubernetes Controller and Custom Resource Definition mechanism and basically the above steps create an Istio operator controller in the istio-operator namespace and also registers the CRDs in the Kubernetes Registry. Basically, it extends the API for Kubernetes and allows management of a Custom Resource(CR). A word of caution, the existing upstream Istio Operator does not follow any Operator Framework like kubebuilder or Operator SDK. Hence, many of the expected behavior fail like trying to create two Istio Operator Custom Resource(the community mentions it as \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"iop\"), \" instances) in different namespaces or multiple \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"iop\"), \" instances and are under heavy development.\"), mdx(\"p\", null, \"Ok, so now lets jump into action. We will build our Istio Setup for the scenario 1 &2 above shown in the diagram below. There are three different instances of Ingress Gateway(and it could be egress gateway as well) :\"), mdx(\"p\", null, \"a. Ingress Gateway in Control Plane for traffic entry point to the Control plane Observability Components like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Kiali\"), \"(for the Service Mesh Graph), \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Prometheus\"), \"(for metrics),Grafana(for visual charts of the metrics)and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Jaeger\"), \" (for distributed tracing between the services)\\nb. Ingress Gateway in the Worskpace 1 namespace for traffic entry point to the workspace 1 microservices.\\nc. Ingress Gateway in the Worskpace 2 namespace for traffic entry point to the workspace 2 microservices.\"), mdx(\"img\", {\n    src: img1,\n    alt: \"kubernetes-cluster\"\n  }), mdx(\"p\", {\n    align: \"center\"\n  }, \"Single Control Plane with Multiple Data Plane each with separate Ingress Gateway\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Creation of Control Plane CR and Data Plane CR\\nA sample CR for creation of the Control plane and Data Plane CR can be referred below :\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ cat iop-platform.yaml\\napiVersion: install.istio.io/v1alpha1\\nkind: IstioOperator\\nmetadata:\\nnamespace: istio-system\\nname: platform-istiocontrolplane\\nspec:\\nprofile: demo\\n$ cat iop-wk1-gw.yaml\\napiVersion: install.istio.io/v1alpha1\\nkind: IstioOperator\\nmetadata:\\nnamespace: istio-system\\nname: wk1-gwconfig\\nspec:\\nprofile: empty\\ncomponents:\\ningressGateways:\\n\\u2014 name: wk1-ingressgw\\nnamespace: workspace-1\\nenabled: true\\nlabel:\\nistio: ingressgateway-1\\napp: istio-ingressgateway-1\\nvalues:\\ngateways:\\nistio-ingressgateway:\\ndebug: error\\n$ cat iop-wk2-gw.yaml\\napiVersion: install.istio.io/v1alpha1\\nkind: IstioOperator\\nmetadata:\\nnamespace: istio-system\\nname: wk2-gwconfig\\nspec:\\nprofile: empty\\ncomponents:\\ningressGateways:\\n\\u2014 name: wk2-ingressgw\\nnamespace: workspace-2\\nenabled: true\\nlabel:\\nistio: ingressgateway-2\\napp: istio-ingressgateway-2\\nvalues:\\ngateways:\\nistio-ingressgateway:\\ndebug: error\\n\")))), mdx(\"p\", null, \"It is important to make sure the indentation is correct ,otherwise it would lead to errors.\\nReference: \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://istio.io/latest/docs/setup/install/\"\n  }, \"Istio Website\")), mdx(\"p\", null, \"Deploy the CRs using kubectl:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ kubectl create ns istio-system\\n$ kubectl create ns workspace-1\\n$ kubectl create ns workspace-2\\n$ kubectl apply -f ../iop-platform.yaml\\nistiooperator.install.istio.io/platform-istiocontrolplane created\\n$ kubectl apply -f ../iop-wk1-gw.yaml\\nistiooperator.install.istio.io/wk1-gwconfig configured\\n$ kubectl apply -f ../iop-wk2-gw.yaml\\nistiooperator.install.istio.io/wk2-gwconfig configured\\n\")), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Troubleshooting the Istio Operator Controller.\\nIts a good idea to run another window and execute the below command to observe the running logs on the controller pod.\", mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ kubectl logs -f -n istio-operator\\n$(kubectl get pods -n istio-operator -lname=istio-operator -o jsonpath=\\u2019{.items[0].metadata.name}\\u2019)\\n\")))), mdx(\"img\", {\n    src: img2,\n    alt: \"image\"\n  }), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Observe the created objects in istio-system and the workspace namespaces for all pods to be in running state.\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ kubectl get all -n istio-system\\nNAME READY STATUS RESTARTS AGE\\npod/grafana-b54bb57b9-k84xf 1/1 Running 0 79s\\npod/istio-egressgateway-77c7d594c5-fr79j 1/1 Running 0 83s\\npod/istio-ingressgateway-766c84dfdc-p6g6t 1/1 Running 0 83s\\npod/istio-tracing-9dd6c4f7c-ndjvn 1/1 Running 0 79s\\npod/istiod-7b69ff6f8c-9gwp8 1/1 Running 0 94s\\npod/kiali-d45468dc4\\u20134sww2 1/1 Running 0 79s\\npod/prometheus-5fdfc44fb7\\u201367khx 2/2 Running 0 78s\\n<truncated>\\nesudbat@istio:~/istio$ kubectl get all -n workspace-1\\nNAME READY STATUS RESTARTS AGE\\npod/wk1-ingressgw-5674488c8b-fg2w5 1/1 Running 0 21s\\n<truncated>\\nesudbat@istio:~/istio$ kubectl get all -n workspace-2\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now we will label the namespaces for istio-injection\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$kubectl label namespace workspace-1 istio-injection=enabled\\n$kubectl label namespace workspace-2 istio-injection=enabled\\n\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Now we will deploy the bookinfo sample application in both namespaces but before that we need to make sure that the Gateway resource is updated with the correct label selector as below :\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$ cat istio/bookinfo-gateway-1.yaml\\napiVersion: networking.istio.io/v1alpha3\\nkind: Gateway\\nmetadata:\\nname: bookinfo-gateway\\nspec:\\nselector:\\nistio: ingressgateway-1 # use istio gateway-1 controller in workspace-1\\nservers:\\n\\u2014 port:\\nnumber: 80\\nname: http\\nprotocol: HTTP\\nhosts:\\n\\u2014 \\u201C*\\u201D\\n$ cat istio/bookinfo-gateway-2.yaml\\napiVersion: networking.istio.io/v1alpha3\\nkind: Gateway\\nmetadata:\\nname: bookinfo-gateway\\nspec:\\nselector:\\nistio: ingressgateway-2 # use istio gateway-2 controller in workspace-1\\nservers:\\n\\u2014 port:\\nnumber: 80\\nname: http\\nprotocol: HTTP\\nhosts:\\n\\u2014 \\u201C*\\u201D\\n\")))), mdx(\"p\", null, \"Deploy the applications in workspace-1 and workspace-2 and deploy the Gateway,VirtualService and DestinationRules.\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-sh\"\n  }, \"$kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml -n workspace-1\\n$kubectl apply -f samples/bookinfo/platform/kube/bookinfo.yaml -n workspace-2\\n$kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml -n workspace-1\\n$kubectl apply -f samples/bookinfo/networking/bookinfo-gateway.yaml -n workspace-2\\n$kubectl apply -f samples/bookinfo/networking/destination-rule-all-mtls.yaml -n workspace-1\\n$kubectl apply -f samples/bookinfo/networking/destination-rule-all-mtls.yaml -n workspace-2\\n\")), mdx(\"p\", null, \"Essentially what is happening is the Gateway CR is configuring the traffic to come via the ingress-gateway, it specifies the label selector based on which the ingress-gateway is selected and the host from where the traffic is allowed and port on which the traffic is allowed. It is important to ensure the label maps the label on the ingress-gateway.\\nOnce this is done the traffic will start flowing the intended gateway and it could be observed on the Kiali dashboard.\\nPlease note that in this scenario the Kiali is also accessed via the default control plane ingress-gateway running in the istio-system control plane namespace.\"), mdx(\"img\", {\n    src: img3,\n    alt: \"image\"\n  }), mdx(\"p\", {\n    align: \"center\"\n  }, \"Kiali view for Workspace-1\"), mdx(\"img\", {\n    src: img4,\n    alt: \"image\"\n  }), mdx(\"p\", {\n    align: \"center\"\n  }, \"Kiali view for Workspace-2\"), mdx(\"p\", null, \"Shortly, we will go over the 3rd scenario which is to run multiple Istio Control Planes (Multiple Service Meshes) within the same Kubernetes Cluster. For that, we will need to build an open-shift setup and deploy the Maistra Istio Operator.\\nSpecial thanks to the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://istio.slack.com/\"\n  }, \"Istio Community\"), \" for helping me understand the concepts and also answering my queries and of course to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://calcotestudios.com/talks/\"\n  }, \"Lee Calcote\"), \", who helped me embark on my Istio journey.\"), mdx(\"div\", null, mdx(\"b\", null, \"Connect with Sudeep Batra on\", mdx(\"a\", {\n    href: \"https://www.linkedin.com/in/sudeep-batra\"\n  }, \" LinkedIn\"), \",\", mdx(\"a\", {\n    href: \"https://github.com/sb1975\"\n  }, \" \", \"GitHub\"), \", or\", mdx(\"a\", {\n    href: \"https://twitter.com/sudeepbatra\"\n  }, \" Twitter\"), \".\"))));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Service Mesh (Istio) patterns for Multitenancy","subtitle":"","date":"July 18th, 2020","author":"Sudeep Batra","thumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"fullWidth","placeholder":{"fallback":"data:image/webp;base64,UklGRkYAAABXRUJQVlA4IDoAAAAwAwCdASoUAA0APtFUpEuoJKOhsAgBABoJaQAAetGLLsAAAP7vhDiT/XpMBU3mvncWVJalRVYSIAAA"},"images":{"fallback":{"src":"/static/6126014dd6a4c684993008406f28dae0/d65dc/image2.webp","srcSet":"/static/6126014dd6a4c684993008406f28dae0/1f1d0/image2.webp 750w,\n/static/6126014dd6a4c684993008406f28dae0/d65dc/image2.webp 1050w","sizes":"100vw"},"sources":[]},"width":1,"height":0.638095238095238}},"extension":"webp","publicURL":"/static/6126014dd6a4c684993008406f28dae0/image2.webp"},"darkthumbnail":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","placeholder":{"fallback":"data:image/webp;base64,UklGRkYAAABXRUJQVlA4IDoAAAAwAwCdASoUAA0APtFUpEuoJKOhsAgBABoJaQAAetGLLsAAAP7vhDiT/XpMBU3mvncWVJalRVYSIAAA"},"images":{"fallback":{"src":"/static/6126014dd6a4c684993008406f28dae0/cf24b/image2.webp","srcSet":"/static/6126014dd6a4c684993008406f28dae0/cef72/image2.webp 125w,\n/static/6126014dd6a4c684993008406f28dae0/8451e/image2.webp 250w,\n/static/6126014dd6a4c684993008406f28dae0/cf24b/image2.webp 500w,\n/static/6126014dd6a4c684993008406f28dae0/c5f45/image2.webp 1000w","sizes":"(min-width: 500px) 500px, 100vw"},"sources":[]},"width":500,"height":319}},"extension":"webp","publicURL":"/static/6126014dd6a4c684993008406f28dae0/image2.webp"}},"fields":{"slug":"/blog/service-mesh/service-mesh-istio-patterns-for-multitenancy"}}]}},"pageContext":{"category":"Service Mesh"}},"staticQueryHashes":["1376321266","1485533831","3205812809","4047814605"],"matchPath":"/blog/category/service-mesh"}