"use strict";(self.webpackChunkLayer5=self.webpackChunkLayer5||[]).push([[83771],{56013:function(e,t,a){a.r(t),a.d(t,{Head:function(){return b},default:function(){return y}});var n=a(28453),s=a(96540),r=a(44928),o=(a.p,a.p,a.p,a.p,a.p+"static/settings-ad3405d125c81cc83695f10d49b51ae3.webp"),i=a.p+"static/cluster-mgmt-d0c0c8822a1a873e99f27e2b48aa5858.webp",l=a.p+"static/flush-meshsync-110748df93f37b576d8451c64d429cc2.webp",c=a.p+"static/meshery-core-architecture-ada2489fcafbb125bde85de34ba3116e.webp",h=a(64810);function u(e){const t=Object.assign({p:"p",h2:"h2",code:"code",h3:"h3"},(0,n.R)(),e.components);return s.createElement(r.C,null,s.createElement("div",{className:"intro"},s.createElement(t.p,null,"From multi-mesh to now multi-cluster, ",s.createElement(h.Link,{to:"/meshery"},"Meshery")," is\ncontinuously expanding its capability to give developers, operators, and\nsecurity engineers more control over their infrastructure. In this post,\nwe'll take a look behind the scenes at how each component in Meshery's\narchitecture plays a role in the management of many Kubernetes clusters.")),s.createElement(t.h2,null,"Philosophy behind Meshery's multi-cluster management approach"),s.createElement(t.p,null,"While designing Meshery for the world of many clouds, and many Kubernetes clusters, much care has been taken to ensure that Meshery is an ",s.createElement("a",{href:"https://docs.meshery.io/extensibility"},"extensible management platform"),", ready for handling new types of infrastructure and new use cases rapidly through its plugin model. Under the hood, ",s.createElement("a",{href:"https://docs.meshery.io"},"Meshery Server")," acts as a delegator of operations by figuring out which Meshery Adapter registered its capability against the given operation. The operation is then sent to that given component (like one of Meshery’s adapters,e.g. Istio adapter) via a gRPC call. ",s.createElement("img",{src:c,alt:"deploy modal",className:"image-right"})," When the operation involves a Kubernetes cluster(s), the kubeconfig(s) is sent as a parameter to the RPCs. It is then the job of the handling adapter to respect that and perform the operation across the passed clusters from kubeconfigs as needed. The operations not requiring a kubeconfig are managed through the same RPC, with the only difference being that the handling component would ignore the ",s.createElement(t.code,null,"kubeconfigs")," field altogether making the system work not just for Kubernetes, but for other cloud native use cases. This approach of reusing the same RPC for different types of requests is pretty common and sometimes debatable with the other approach of being strict with the RPCs. This is what makes Meshery completely pluggable and extensible."),s.createElement(t.h2,null,"Using multi cluster with Meshery"),s.createElement(t.p,null,"From a client's perspective, there are two uses of the multi context feature in general. While deploying a ",s.createElement(h.Link,{to:"/kanvas"},"Kanvas")," design or performing any other operation on their cluster(s), selecting any number of Kubernetes contexts will allow them to uniformly and parallely perform the operation across the clusters. And while visualizing the state of their cluster(s), the same context switcher will allow them to filter across the clusters whose view they want to see."),s.createElement(t.p,null,"All cluster specific operations are now applied over a number of clusters uniformly. So if you have 10 clusters to manage and 8 of those start with the exact same set of pods, deployments, services, etc then ",s.createElement(h.Link,{to:"/meshery"},"Meshery")," can help you to apply these operations quickly and easily."),s.createElement(t.p,null,"It is as simple as selecting the specific cluster(s) from the Kubernetes context switcher in the navbar, and then applying whatever operation you wanted to, whether that be deploying a sample app, a Prometheus daemonset, or a ",s.createElement(h.Link,{to:"/kanvas"},"Kanvas")," design."),s.createElement(t.p,null,"Just before applying the operation, you will be prompted with a confirmation modal which will provide the information about which cluster(s) that operation will be performed against. As the User interface improves, this same modal will also convey more useful information about the operation they are going to perform."),s.createElement("br"),s.createElement(t.h3,null,"Using Kanvas Operator Mode"),s.createElement(t.p,null,"You can switch between views of your cluster in visualizer mode while using ",s.createElement("a",{href:"https://kanvas.new"},"Kanvas"),"."),s.createElement(t.h3,null,"Managing Meshery on multiple clusters"),s.createElement(t.p,null,"Users can perform cluster related operations from the settings page like adding more clusters, removing data from existing clusters and removing existing clusters."),s.createElement("img",{src:o,alt:"Settings page",className:"slides-right"}),s.createElement(t.p,null,"Meshery also deploys Meshery operator across the cluster it’s about to manage. This operator manages the lifecycle of a Meshery broker and MeshSync. MeshSync pumps the blood into Meshery’s core, in other words, it is responsible for watching all different types of resources by establishing a watch stream over each of them. MeshSync then pumps that data into the NATS server, of which Meshery server itself is a client. From there, Meshery server gets all the relevant data related to activities in the cluster."),s.createElement(t.p,null,"By default, ",s.createElement(h.Link,{to:"/meshery"},"Meshery")," wants to be as much aware about your infrastructure as possible to provide value so it deploys its operator across each detected cluster. But you can fine tune this configuration by going over each one of them from the table as shown."),s.createElement("img",{src:i,alt:"Kubernetes multi-cluster management with Meshery",className:"image-center-shadow"}),s.createElement(t.p,null,"If you disconnect your cluster and do not want to persist the data from that cluster then you can perform a fine-grained deletion by deleting all MeshSync data (which are the Kubernetes objects) for that specific cluster."),s.createElement("img",{src:l,alt:"flushing MeshSync data",className:"image-center-shadow"}),s.createElement(t.h2,null,"Future of multi-cluster"),s.createElement(t.p,null,"Meshery as an extension point to your infrastructure provides out-of-the-box value by adding components which can be Kubernetes specific, service mesh specific or custom components to add new functionality. We can now add multi-cluster specific components to provide more abstraction. This model can be used along with Meshery’s multi-mesh capabilities to give an overall multi-mesh multi-cluster experience to the user. For instance, your Istio service mesh spanning across multiple clusters can be abstracted and managed by Meshery using custom components such as VirtualGateway and VirtualDestinationRules. In this case, Meshery’s Istio adapter will handle the logic of converting a VirtualGateway into gateways across the clusters. This abstraction provides high value by powering the service mesh to span across the clusters while the Ops team can configure the mesh with minimal effort."),s.createElement(t.p,null,"Just like the example above, many such Meshery extension points are in Meshery to add logic into and add useful functionality. And as more of such extension points are added, Meshery will continue to give more and more power to your cloud native infrastructure."))}var m=function(e){void 0===e&&(e={});const{wrapper:t}=Object.assign({},(0,n.R)(),e.components);return t?s.createElement(t,e,s.createElement(u,e)):u(e)},p=a(60522),d=a(60145),f=a(63562);const g=e=>{let{data:t,children:a}=e;return s.createElement(s.Fragment,null,s.createElement(f.Ay,null,s.createElement(d.A,{data:t},a)))};function y(e){return s.createElement(g,e,s.createElement(m,e))}const b=e=>{var t,a,n,r;let{data:o}=e;const{frontmatter:i}=o.mdx,l=(null===(t=i.thumbnail)||void 0===t?void 0:t.publicURL)||(null===(a=i.thumbnail_svg)||void 0===a?void 0:a.publicURL)||(null===(n=i.darkthumbnail)||void 0===n?void 0:n.publicURL)||(null===(r=i.darkthumbnail_svg)||void 0===r?void 0:r.publicURL);return s.createElement(p.A,{title:i.title,image:l,description:i.description})}}}]);